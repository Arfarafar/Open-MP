# Лабораторная работа (вариант 2г)
Рассмотрим исходную программу: 

![image](https://user-images.githubusercontent.com/45181367/206693249-fd8d2700-be97-4e56-877d-b8a48033485b.png)

Ее вектор расстояний D равен (-4, 5) 

Значит d = ("<",">") 

Внешний цикл имеет антизависимость и может быть распараллелен при условии дублирования входных данных. Внутренний же цикл имеет истинную зависимость и может быть расспараллелен только на 5 потоков, что в данном случае не имеет особого смысла (пока число исполнителей не станет особенно велико)

Поэтому в моей программе я распаралелил внешний цикл, при этом чтобы исключить сообщение процессов друг с другом, 4 линии массива "а" необходимые для заполнения последних строк выделенных данному процессу, дублируются. 


## Параметры запуска
Чтобы скомпилировать:
``` 
mpicc lab2G.c -lm -std=c99 -o lab2G
``` 
Теперь создаем скрипт start.sh (для примера на 8 потоков):
``` 
-l walltime=00:01:00,nodes=4:ppn=2
#PBS -N job
#PBS -q batch
cd $PBS_O_WORKDIR
mpirun --hostfile $PBS_NODEFILE -np 8 ./lab2G 
``` 

Чтобы запустить: 
`qsub start.sh` - ставим скрипт в очередь задач PBS. 

Ждем. 

 
### Получились следующие результаты: 

![image](https://github.com/Arfarafar/Open-MP/blob/main/lab1/Figure_1.png)

Эффективность ускорения составила 78% 
Так как на 20 потоках программа выполнилась за 0.52с, тогда как на одном за 8,15с.

![image](https://github.com/Arfarafar/Open-MP/blob/main/lab1/eff.png)

Ускорение почти линейно зависит от числа потоков

![image](https://github.com/Arfarafar/Open-MP/blob/main/lab1/acc.png)
